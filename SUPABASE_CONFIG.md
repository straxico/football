# ⚙️ تنظیمات Supabase برای توسعه

## 🔓 غیرفعال کردن تأیید ایمیل (برای محیط توسعه)

برای اینکه کاربران بعد از ثبت‌نام **مستقیماً** وارد شوند و نیازی به تأیید ایمیل نباشد:

### گام‌های غیرفعال‌سازی:

1. به Dashboard پروژه Supabase خود بروید
2. از منوی سمت چپ، **Authentication** را انتخاب کنید
3. به تب **Providers** بروید
4. روی **Email** کلیک کنید
5. در بخش **Email Authentication**:
   - گزینه **"Confirm email"** را پیدا کنید
   - آن را **غیرفعال (OFF)** کنید
6. روی **Save** کلیک کنید

### نتیجه:
✅ بعد از ثبت‌نام، کاربر بلافاصله وارد می‌شود  
✅ نیازی به چک کردن ایمیل و کلیک روی لینک تأیید نیست  
✅ تجربه کاربری سریع‌تر برای توسعه  

---

## 🔐 تنظیمات امنیتی پیشنهادی (محیط Production)

**هشدار**: غیرفعال کردن تأیید ایمیل فقط برای محیط توسعه توصیه می‌شود!

### برای محیط Production:
- ✅ تأیید ایمیل را **فعال** نگه دارید
- ✅ Rate limiting را تنظیم کنید
- ✅ CAPTCHA را فعال کنید (برای جلوگیری از spam)

### فعال کردن CAPTCHA (اختیاری):

1. **Authentication** > **Providers** > **Email**
2. بخش **Security** را پیدا کنید
3. گزینه **Enable Captcha protection** را فعال کنید
4. از سرویس hCaptcha یا reCAPTCHA استفاده کنید

---

## 📧 سفارشی‌سازی ایمیل‌ها (اختیاری)

اگر می‌خواهید ایمیل‌های Supabase را سفارشی کنید:

1. **Authentication** > **Email Templates**
2. می‌توانید تمپلیت‌های زیر را ویرایش کنید:
   - Confirm signup (ثبت‌نام)
   - Magic Link (ورود بدون رمز)
   - Reset password (بازیابی رمز)

---

## 🌐 تنظیم Redirect URLs

برای مطمئن شدن که بعد از ثبت‌نام/ورود به صفحه درست می‌رود:

1. **Authentication** > **URL Configuration**
2. در بخش **Redirect URLs**، آدرس‌های زیر را اضافه کنید:
   ```
   http://localhost:3000
   http://localhost:3000/callback
   https://yourdomain.com (برای production)
   ```

---

## 🧪 تست تنظیمات

بعد از تغییر تنظیمات:

1. **سرور را restart کنید**: `npm run dev`
2. در مرورگر، تب **Network** را باز کنید (F12)
3. یک حساب کاربری جدید بسازید
4. بررسی کنید که:
   - ✅ هیچ خطایی در Console نیست
   - ✅ بعد از ثبت‌نام مستقیماً وارد شده‌اید
   - ✅ نام شما در هدر صفحه نمایش داده می‌شود

---

## ❓ سوالات متداول

### Q: بعد از ثبت‌نام صفحه سفید می‌شود؟
**A**: 
- Console را چک کنید
- مطمئن شوید `.env` درست تنظیم شده
- Redirect URLs را بررسی کنید

### Q: هنوز ایمیل تأیید می‌خواهد؟
**A**:
- مطمئن شوید **Confirm email** را OFF کرده‌اید
- Save را زده‌اید
- Cache مرورگر را پاک کنید (Ctrl+Shift+Delete)
- سرور را restart کنید

### Q: می‌خواهم در production تأیید ایمیل داشته باشم؟
**A**: 
- در Supabase می‌توانید چند environment داشته باشید
- یا از متغیر محیطی استفاده کنید
- یا با Domain URL شرطی عمل کنید

---

## 🚀 آماده!

حالا کاربران می‌توانند:
1. ثبت‌نام کنند
2. بلافاصله وارد شوند
3. شروع به پیش‌بینی کنند

**نکته**: این تنظیمات فقط برای محیط توسعه است. در production حتماً امنیت را در نظر بگیرید! 🔒
